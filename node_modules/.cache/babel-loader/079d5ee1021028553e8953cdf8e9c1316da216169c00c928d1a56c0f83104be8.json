{"ast":null,"code":"var _jsxFileName = \"/Users/evelynpark/Desktop/bell-day/who-is-going-to-bell-the-cat/src/pages/Exam.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useMemo } from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport { QUESTIONS } from \"../data\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst norm = s => s.toLowerCase().replace(/[.,!?;:\"'()]/g, \"\").replace(/\\s+/g, \" \").trim();\nconst tokenize = s => norm(s).split(\" \").filter(Boolean);\nexport default function Exam() {\n  _s();\n  const {\n    day\n  } = useParams();\n  const {\n    state\n  } = useLocation();\n  const nav = useNavigate();\n  const [idx, setIdx] = useState(0);\n  const [spoken, setSpoken] = useState(\"\");\n  const [result, setResult] = useState(null);\n  const list = useMemo(() => QUESTIONS[day] || [], [day]);\n  const q = list[idx];\n  if (!q) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-gray-700\",\n        children: \"\\uC2DC\\uD5D8 \\uBB38\\uC81C\\uAC00 \\uC5C6\\uC5B4\\uC694.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n\n  // SpeechRecognition\n  const startSpeech = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"이 브라우저는 음성 인식을 지원하지 않아요 😢\");\n      return;\n    }\n    const recog = new SpeechRecognition();\n    recog.lang = \"en-US\";\n    recog.onresult = e => {\n      const text = e.results[0][0].transcript;\n      setSpoken(text);\n      checkAnswer(text);\n    };\n    recog.start();\n  };\n\n  // 채점\n  const checkAnswer = text => {\n    const userTokens = tokenize(text);\n    const expectedTokens = tokenize(q.enChunks.join(\" \"));\n    const wrongIdxs = [];\n    expectedTokens.forEach((exp, i) => {\n      const user = userTokens[i] || \"\";\n      if (user === exp) return;\n      if (user + \"s\" === exp || user === exp + \"s\") return;\n      wrongIdxs.push(i);\n    });\n    setResult({\n      expected: expectedTokens,\n      wrongIdxs\n    });\n  };\n  const handleNext = () => {\n    if (idx < list.length - 1) {\n      setIdx(idx + 1);\n      setSpoken(\"\");\n      setResult(null);\n    } else {\n      nav(\"/result\", {\n        state: {\n          name: state === null || state === void 0 ? void 0 : state.name,\n          date: state === null || state === void 0 ? void 0 : state.date,\n          day\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-red-600 to-orange-500 flex items-center justify-center p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/95 backdrop-blur-lg shadow-xl rounded-2xl w-full max-w-2xl p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-center text-gray-800 mb-6\",\n        children: [\"Day \", day, \" \\uC2DC\\uD5D8 \", idx + 1, \" / \", list.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-100 text-yellow-900 font-semibold text-lg text-center py-3 px-4 rounded-lg mb-6 shadow-inner\",\n        children: q.koChunks.join(\" / \")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-8 py-4 text-lg font-bold rounded-full bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg hover:opacity-90 transition\",\n          onClick: startSpeech,\n          children: \"\\uD83C\\uDFA4 \\uB9D0\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), spoken && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700 text-center\",\n          children: [\"\\uD83D\\uDC49 \\uC778\\uC2DD\\uB41C \\uBB38\\uC7A5: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: spoken\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap justify-center gap-2 text-lg font-bold\",\n          children: result === null || result === void 0 ? void 0 : result.expected.map((word, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `px-2 py-1 rounded ${result.wrongIdxs.includes(i) ? \"bg-red-200 text-red-700\" : \"bg-green-200 text-green-700\"}`,\n            children: word\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center mt-6\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"px-6 py-3 rounded-lg bg-gray-800 text-white font-semibold shadow hover:bg-gray-900 transition\",\n            onClick: handleNext,\n            children: idx < list.length - 1 ? \"다음 문제\" : \"시험 끝내기\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(Exam, \"nsHxRIHooFY7xrXSgXOanf+vxo8=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = Exam;\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useState","useMemo","useNavigate","useParams","useLocation","QUESTIONS","jsxDEV","_jsxDEV","norm","s","toLowerCase","replace","trim","tokenize","split","filter","Boolean","Exam","_s","day","state","nav","idx","setIdx","spoken","setSpoken","result","setResult","list","q","className","children","fileName","_jsxFileName","lineNumber","columnNumber","startSpeech","SpeechRecognition","window","webkitSpeechRecognition","alert","recog","lang","onresult","e","text","results","transcript","checkAnswer","start","userTokens","expectedTokens","enChunks","join","wrongIdxs","forEach","exp","i","user","push","expected","handleNext","length","name","date","koChunks","onClick","map","word","includes","_c","$RefreshReg$"],"sources":["/Users/evelynpark/Desktop/bell-day/who-is-going-to-bell-the-cat/src/pages/Exam.js"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport { QUESTIONS } from \"../data\";\n\nconst norm = (s) =>\n  s.toLowerCase().replace(/[.,!?;:\"'()]/g, \"\").replace(/\\s+/g, \" \").trim();\nconst tokenize = (s) => norm(s).split(\" \").filter(Boolean);\n\nexport default function Exam() {\n  const { day } = useParams();\n  const { state } = useLocation();\n  const nav = useNavigate();\n  const [idx, setIdx] = useState(0);\n  const [spoken, setSpoken] = useState(\"\");\n  const [result, setResult] = useState(null);\n\n  const list = useMemo(() => QUESTIONS[day] || [], [day]);\n  const q = list[idx];\n\n  if (!q) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <h2 className=\"text-lg font-semibold text-gray-700\">시험 문제가 없어요.</h2>\n      </div>\n    );\n  }\n\n  // SpeechRecognition\n  const startSpeech = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"이 브라우저는 음성 인식을 지원하지 않아요 😢\");\n      return;\n    }\n    const recog = new SpeechRecognition();\n    recog.lang = \"en-US\";\n    recog.onresult = (e) => {\n      const text = e.results[0][0].transcript;\n      setSpoken(text);\n      checkAnswer(text);\n    };\n    recog.start();\n  };\n\n  // 채점\n  const checkAnswer = (text) => {\n    const userTokens = tokenize(text);\n    const expectedTokens = tokenize(q.enChunks.join(\" \"));\n    const wrongIdxs = [];\n\n    expectedTokens.forEach((exp, i) => {\n      const user = userTokens[i] || \"\";\n      if (user === exp) return;\n      if (user + \"s\" === exp || user === exp + \"s\") return;\n      wrongIdxs.push(i);\n    });\n\n    setResult({ expected: expectedTokens, wrongIdxs });\n  };\n\n  const handleNext = () => {\n    if (idx < list.length - 1) {\n      setIdx(idx + 1);\n      setSpoken(\"\");\n      setResult(null);\n    } else {\n      nav(\"/result\", { state: { name: state?.name, date: state?.date, day } });\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-red-600 to-orange-500 flex items-center justify-center p-6\">\n      <div className=\"bg-white/95 backdrop-blur-lg shadow-xl rounded-2xl w-full max-w-2xl p-8\">\n        {/* 제목 */}\n        <h1 className=\"text-2xl font-bold text-center text-gray-800 mb-6\">\n          Day {day} 시험 {idx + 1} / {list.length}\n        </h1>\n\n        {/* 문제 (한글만 보여줌) */}\n        <div className=\"bg-yellow-100 text-yellow-900 font-semibold text-lg text-center py-3 px-4 rounded-lg mb-6 shadow-inner\">\n          {q.koChunks.join(\" / \")}\n        </div>\n\n        {/* 말하기 버튼 */}\n        <div className=\"flex justify-center mb-6\">\n          <button\n            className=\"px-8 py-4 text-lg font-bold rounded-full bg-gradient-to-r from-red-500 to-orange-500 text-white shadow-lg hover:opacity-90 transition\"\n            onClick={startSpeech}\n          >\n            🎤 말하기\n          </button>\n        </div>\n\n        {/* 결과 */}\n        {spoken && (\n          <div className=\"space-y-4\">\n            <p className=\"text-gray-700 text-center\">\n              👉 인식된 문장: <span className=\"font-semibold\">{spoken}</span>\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-2 text-lg font-bold\">\n              {result?.expected.map((word, i) => (\n                <span\n                  key={i}\n                  className={`px-2 py-1 rounded ${\n                    result.wrongIdxs.includes(i)\n                      ? \"bg-red-200 text-red-700\"\n                      : \"bg-green-200 text-green-700\"\n                  }`}\n                >\n                  {word}\n                </span>\n              ))}\n            </div>\n\n            <div className=\"flex justify-center mt-6\">\n              <button\n                className=\"px-6 py-3 rounded-lg bg-gray-800 text-white font-semibold shadow hover:bg-gray-900 transition\"\n                onClick={handleNext}\n              >\n                {idx < list.length - 1 ? \"다음 문제\" : \"시험 끝내기\"}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}