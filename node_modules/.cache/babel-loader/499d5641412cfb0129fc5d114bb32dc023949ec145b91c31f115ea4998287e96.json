{"ast":null,"code":"// src/lib/tts.js\nexport const canSpeak = () => \"speechSynthesis\" in window;\nconst getVoice = (langHint = \"en\") => {\n  const voices = window.speechSynthesis.getVoices();\n  // 영어 우선 탐색\n  const prefer = voices.find(v => {\n    var _v$lang;\n    return (_v$lang = v.lang) === null || _v$lang === void 0 ? void 0 : _v$lang.toLowerCase().startsWith(langHint);\n  }) || voices.find(v => {\n    var _v$lang2;\n    return (_v$lang2 = v.lang) === null || _v$lang2 === void 0 ? void 0 : _v$lang2.toLowerCase().startsWith(\"en\");\n  }) || voices[0];\n  return prefer || null;\n};\nexport const speak = (text, {\n  rate = 0.8,\n  pitch = 1,\n  lang = \"en-US\",\n  onend\n} = {}) => {\n  if (!canSpeak()) return () => {};\n  window.speechSynthesis.cancel();\n  const uttr = new SpeechSynthesisUtterance(text);\n  uttr.rate = rate; // 0.1~10 (느리게: 0.6~0.8, 아주 느리게: 0.4~0.5)\n  uttr.pitch = pitch;\n  uttr.lang = lang;\n  const voice = getVoice(\"en\");\n  if (voice) uttr.voice = voice;\n  uttr.onend = onend || null;\n  window.speechSynthesis.speak(uttr);\n  return () => window.speechSynthesis.cancel();\n};\n\n// 청크용(항상 느리게)\nexport const speakSlow = text => speak(text, {\n  rate: 0.6\n});\nexport const speakVerySlow = text => speak(text, {\n  rate: 0.45\n});","map":{"version":3,"names":["canSpeak","window","getVoice","langHint","voices","speechSynthesis","getVoices","prefer","find","v","_v$lang","lang","toLowerCase","startsWith","_v$lang2","speak","text","rate","pitch","onend","cancel","uttr","SpeechSynthesisUtterance","voice","speakSlow","speakVerySlow"],"sources":["/Users/evelynpark/Desktop/bell-day/who-is-going-to-bell-the-cat/src/lib/tts.js"],"sourcesContent":["// src/lib/tts.js\nexport const canSpeak = () => \"speechSynthesis\" in window;\n\nconst getVoice = (langHint=\"en\") => {\n  const voices = window.speechSynthesis.getVoices();\n  // 영어 우선 탐색\n  const prefer = voices.find(v => v.lang?.toLowerCase().startsWith(langHint))\n             || voices.find(v => v.lang?.toLowerCase().startsWith(\"en\"))\n             || voices[0];\n  return prefer || null;\n};\n\nexport const speak = (text, { rate=0.8, pitch=1, lang=\"en-US\", onend } = {}) => {\n  if (!canSpeak()) return () => {};\n  window.speechSynthesis.cancel();\n  const uttr = new SpeechSynthesisUtterance(text);\n  uttr.rate = rate;     // 0.1~10 (느리게: 0.6~0.8, 아주 느리게: 0.4~0.5)\n  uttr.pitch = pitch;\n  uttr.lang = lang;\n  const voice = getVoice(\"en\");\n  if (voice) uttr.voice = voice;\n  uttr.onend = onend || null;\n  window.speechSynthesis.speak(uttr);\n  return () => window.speechSynthesis.cancel();\n};\n\n// 청크용(항상 느리게)\nexport const speakSlow = (text) => speak(text, { rate: 0.6 });\nexport const speakVerySlow = (text) => speak(text, { rate: 0.45 });\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,QAAQ,GAAGA,CAAA,KAAM,iBAAiB,IAAIC,MAAM;AAEzD,MAAMC,QAAQ,GAAGA,CAACC,QAAQ,GAAC,IAAI,KAAK;EAClC,MAAMC,MAAM,GAAGH,MAAM,CAACI,eAAe,CAACC,SAAS,CAAC,CAAC;EACjD;EACA,MAAMC,MAAM,GAAGH,MAAM,CAACI,IAAI,CAACC,CAAC;IAAA,IAAAC,OAAA;IAAA,QAAAA,OAAA,GAAID,CAAC,CAACE,IAAI,cAAAD,OAAA,uBAANA,OAAA,CAAQE,WAAW,CAAC,CAAC,CAACC,UAAU,CAACV,QAAQ,CAAC;EAAA,EAAC,IAC7DC,MAAM,CAACI,IAAI,CAACC,CAAC;IAAA,IAAAK,QAAA;IAAA,QAAAA,QAAA,GAAIL,CAAC,CAACE,IAAI,cAAAG,QAAA,uBAANA,QAAA,CAAQF,WAAW,CAAC,CAAC,CAACC,UAAU,CAAC,IAAI,CAAC;EAAA,EAAC,IACxDT,MAAM,CAAC,CAAC,CAAC;EACvB,OAAOG,MAAM,IAAI,IAAI;AACvB,CAAC;AAED,OAAO,MAAMQ,KAAK,GAAGA,CAACC,IAAI,EAAE;EAAEC,IAAI,GAAC,GAAG;EAAEC,KAAK,GAAC,CAAC;EAAEP,IAAI,GAAC,OAAO;EAAEQ;AAAM,CAAC,GAAG,CAAC,CAAC,KAAK;EAC9E,IAAI,CAACnB,QAAQ,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,CAAC;EAChCC,MAAM,CAACI,eAAe,CAACe,MAAM,CAAC,CAAC;EAC/B,MAAMC,IAAI,GAAG,IAAIC,wBAAwB,CAACN,IAAI,CAAC;EAC/CK,IAAI,CAACJ,IAAI,GAAGA,IAAI,CAAC,CAAK;EACtBI,IAAI,CAACH,KAAK,GAAGA,KAAK;EAClBG,IAAI,CAACV,IAAI,GAAGA,IAAI;EAChB,MAAMY,KAAK,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAC5B,IAAIqB,KAAK,EAAEF,IAAI,CAACE,KAAK,GAAGA,KAAK;EAC7BF,IAAI,CAACF,KAAK,GAAGA,KAAK,IAAI,IAAI;EAC1BlB,MAAM,CAACI,eAAe,CAACU,KAAK,CAACM,IAAI,CAAC;EAClC,OAAO,MAAMpB,MAAM,CAACI,eAAe,CAACe,MAAM,CAAC,CAAC;AAC9C,CAAC;;AAED;AACA,OAAO,MAAMI,SAAS,GAAIR,IAAI,IAAKD,KAAK,CAACC,IAAI,EAAE;EAAEC,IAAI,EAAE;AAAI,CAAC,CAAC;AAC7D,OAAO,MAAMQ,aAAa,GAAIT,IAAI,IAAKD,KAAK,CAACC,IAAI,EAAE;EAAEC,IAAI,EAAE;AAAK,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}