{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useSpeech.js\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nexport default function useSpeech({\n  lang = \"en-US\",\n  interim = false,\n  onResult\n} = {}) {\n  _s();\n  const [listening, setListening] = useState(false);\n  const recogRef = useRef(null);\n  const can = typeof window !== \"undefined\" && (window.SpeechRecognition || window.webkitSpeechRecognition);\n  useEffect(() => {\n    if (!can) return;\n    const R = window.SpeechRecognition || window.webkitSpeechRecognition;\n    const rec = new R();\n    rec.lang = lang;\n    rec.interimResults = interim;\n    rec.continuous = false;\n    rec.onresult = e => {\n      const str = Array.from(e.results).map(r => {\n        var _r$;\n        return ((_r$ = r[0]) === null || _r$ === void 0 ? void 0 : _r$.transcript) || \"\";\n      }).join(\" \");\n      onResult === null || onResult === void 0 ? void 0 : onResult(str);\n    };\n    rec.onend = () => setListening(false);\n    rec.onerror = () => setListening(false);\n    recogRef.current = rec;\n    return () => {\n      try {\n        rec.abort();\n      } catch {}\n    };\n  }, [can, lang, interim, onResult]);\n  const start = useCallback(() => {\n    if (!recogRef.current) return;\n    try {\n      recogRef.current.start();\n      setListening(true);\n    } catch {}\n  }, []);\n  const stop = useCallback(() => {\n    if (!recogRef.current) return;\n    try {\n      recogRef.current.stop();\n    } catch {}\n    setListening(false);\n  }, []);\n  return {\n    canUseSpeech: !!can,\n    listening,\n    start,\n    stop\n  };\n}\n_s(useSpeech, \"II9624qIfYFOrx28dSBS2piiDPs=\");","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","useSpeech","lang","interim","onResult","_s","listening","setListening","recogRef","can","window","SpeechRecognition","webkitSpeechRecognition","R","rec","interimResults","continuous","onresult","e","str","Array","from","results","map","r","_r$","transcript","join","onend","onerror","current","abort","start","stop","canUseSpeech"],"sources":["/Users/evelynpark/Desktop/bell-day/who-is-going-to-bell-the-cat/src/hooks/useSpeech.js"],"sourcesContent":["// src/hooks/useSpeech.js\nimport { useCallback, useEffect, useRef, useState } from \"react\";\n\nexport default function useSpeech({ lang=\"en-US\", interim=false, onResult } = {}) {\n  const [listening, setListening] = useState(false);\n  const recogRef = useRef(null);\n  const can = typeof window !== \"undefined\" && (\n    window.SpeechRecognition || window.webkitSpeechRecognition\n  );\n\n  useEffect(() => {\n    if (!can) return;\n    const R = window.SpeechRecognition || window.webkitSpeechRecognition;\n    const rec = new R();\n    rec.lang = lang;\n    rec.interimResults = interim;\n    rec.continuous = false;\n\n    rec.onresult = (e) => {\n      const str = Array.from(e.results)\n        .map(r => r[0]?.transcript || \"\")\n        .join(\" \");\n      onResult?.(str);\n    };\n    rec.onend = () => setListening(false);\n    rec.onerror = () => setListening(false);\n\n    recogRef.current = rec;\n    return () => {\n      try { rec.abort(); } catch {}\n    };\n  }, [can, lang, interim, onResult]);\n\n  const start = useCallback(() => {\n    if (!recogRef.current) return;\n    try {\n      recogRef.current.start();\n      setListening(true);\n    } catch {}\n  }, []);\n\n  const stop = useCallback(() => {\n    if (!recogRef.current) return;\n    try {\n      recogRef.current.stop();\n    } catch {}\n    setListening(false);\n  }, []);\n\n  return { canUseSpeech: !!can, listening, start, stop };\n}\n"],"mappings":";AAAA;AACA,SAASA,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEhE,eAAe,SAASC,SAASA,CAAC;EAAEC,IAAI,GAAC,OAAO;EAAEC,OAAO,GAAC,KAAK;EAAEC;AAAS,CAAC,GAAG,CAAC,CAAC,EAAE;EAAAC,EAAA;EAChF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAMQ,QAAQ,GAAGT,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMU,GAAG,GAAG,OAAOC,MAAM,KAAK,WAAW,KACvCA,MAAM,CAACC,iBAAiB,IAAID,MAAM,CAACE,uBAAuB,CAC3D;EAEDd,SAAS,CAAC,MAAM;IACd,IAAI,CAACW,GAAG,EAAE;IACV,MAAMI,CAAC,GAAGH,MAAM,CAACC,iBAAiB,IAAID,MAAM,CAACE,uBAAuB;IACpE,MAAME,GAAG,GAAG,IAAID,CAAC,CAAC,CAAC;IACnBC,GAAG,CAACZ,IAAI,GAAGA,IAAI;IACfY,GAAG,CAACC,cAAc,GAAGZ,OAAO;IAC5BW,GAAG,CAACE,UAAU,GAAG,KAAK;IAEtBF,GAAG,CAACG,QAAQ,GAAIC,CAAC,IAAK;MACpB,MAAMC,GAAG,GAAGC,KAAK,CAACC,IAAI,CAACH,CAAC,CAACI,OAAO,CAAC,CAC9BC,GAAG,CAACC,CAAC;QAAA,IAAAC,GAAA;QAAA,OAAI,EAAAA,GAAA,GAAAD,CAAC,CAAC,CAAC,CAAC,cAAAC,GAAA,uBAAJA,GAAA,CAAMC,UAAU,KAAI,EAAE;MAAA,EAAC,CAChCC,IAAI,CAAC,GAAG,CAAC;MACZvB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAGe,GAAG,CAAC;IACjB,CAAC;IACDL,GAAG,CAACc,KAAK,GAAG,MAAMrB,YAAY,CAAC,KAAK,CAAC;IACrCO,GAAG,CAACe,OAAO,GAAG,MAAMtB,YAAY,CAAC,KAAK,CAAC;IAEvCC,QAAQ,CAACsB,OAAO,GAAGhB,GAAG;IACtB,OAAO,MAAM;MACX,IAAI;QAAEA,GAAG,CAACiB,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,MAAM,CAAC;IAC9B,CAAC;EACH,CAAC,EAAE,CAACtB,GAAG,EAAEP,IAAI,EAAEC,OAAO,EAAEC,QAAQ,CAAC,CAAC;EAElC,MAAM4B,KAAK,GAAGnC,WAAW,CAAC,MAAM;IAC9B,IAAI,CAACW,QAAQ,CAACsB,OAAO,EAAE;IACvB,IAAI;MACFtB,QAAQ,CAACsB,OAAO,CAACE,KAAK,CAAC,CAAC;MACxBzB,YAAY,CAAC,IAAI,CAAC;IACpB,CAAC,CAAC,MAAM,CAAC;EACX,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM0B,IAAI,GAAGpC,WAAW,CAAC,MAAM;IAC7B,IAAI,CAACW,QAAQ,CAACsB,OAAO,EAAE;IACvB,IAAI;MACFtB,QAAQ,CAACsB,OAAO,CAACG,IAAI,CAAC,CAAC;IACzB,CAAC,CAAC,MAAM,CAAC;IACT1B,YAAY,CAAC,KAAK,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAE2B,YAAY,EAAE,CAAC,CAACzB,GAAG;IAAEH,SAAS;IAAE0B,KAAK;IAAEC;EAAK,CAAC;AACxD;AAAC5B,EAAA,CA/CuBJ,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}