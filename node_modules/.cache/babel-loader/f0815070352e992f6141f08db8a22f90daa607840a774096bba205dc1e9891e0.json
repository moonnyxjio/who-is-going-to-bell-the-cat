{"ast":null,"code":"// src/tts.js\nlet cachedVoices = [];\nfunction loadVoices() {\n  cachedVoices = window.speechSynthesis.getVoices();\n  if (!cachedVoices.length) {\n    window.speechSynthesis.onvoiceschanged = () => {\n      cachedVoices = window.speechSynthesis.getVoices();\n    };\n  }\n}\nexport function speak(text, {\n  rate = 1,\n  pitch = 1,\n  lang = \"en-US\"\n} = {}) {\n  if (!window.speechSynthesis) return;\n  loadVoices();\n  window.speechSynthesis.cancel(); // 이전 발화 중지\n\n  const u = new SpeechSynthesisUtterance(text);\n  u.lang = lang;\n  u.rate = rate;\n  u.pitch = pitch;\n\n  // 영어 여성 보이스 우선 매칭\n  const preferred = cachedVoices.find(v => /en/i.test(v.lang) && /female|samantha|victoria|joanna|jenny/i.test(v.name)) || cachedVoices.find(v => /en/i.test(v.lang));\n  if (preferred) u.voice = preferred;\n  window.speechSynthesis.speak(u);\n}\nexport function stopSpeak() {\n  if (!window.speechSynthesis) return;\n  window.speechSynthesis.cancel();\n}","map":{"version":3,"names":["cachedVoices","loadVoices","window","speechSynthesis","getVoices","length","onvoiceschanged","speak","text","rate","pitch","lang","cancel","u","SpeechSynthesisUtterance","preferred","find","v","test","name","voice","stopSpeak"],"sources":["/Users/evelynpark/Desktop/bell-day/who-is-going-to-bell-the-cat/src/tts.js"],"sourcesContent":["// src/tts.js\nlet cachedVoices = [];\n\nfunction loadVoices() {\n  cachedVoices = window.speechSynthesis.getVoices();\n  if (!cachedVoices.length) {\n    window.speechSynthesis.onvoiceschanged = () => {\n      cachedVoices = window.speechSynthesis.getVoices();\n    };\n  }\n}\n\nexport function speak(text, { rate = 1, pitch = 1, lang = \"en-US\" } = {}) {\n  if (!window.speechSynthesis) return;\n  loadVoices();\n  window.speechSynthesis.cancel(); // 이전 발화 중지\n\n  const u = new SpeechSynthesisUtterance(text);\n  u.lang = lang;\n  u.rate = rate;\n  u.pitch = pitch;\n\n  // 영어 여성 보이스 우선 매칭\n  const preferred =\n    cachedVoices.find(v => /en/i.test(v.lang) && /female|samantha|victoria|joanna|jenny/i.test(v.name)) ||\n    cachedVoices.find(v => /en/i.test(v.lang));\n  if (preferred) u.voice = preferred;\n\n  window.speechSynthesis.speak(u);\n}\n\nexport function stopSpeak() {\n  if (!window.speechSynthesis) return;\n  window.speechSynthesis.cancel();\n}\n"],"mappings":"AAAA;AACA,IAAIA,YAAY,GAAG,EAAE;AAErB,SAASC,UAAUA,CAAA,EAAG;EACpBD,YAAY,GAAGE,MAAM,CAACC,eAAe,CAACC,SAAS,CAAC,CAAC;EACjD,IAAI,CAACJ,YAAY,CAACK,MAAM,EAAE;IACxBH,MAAM,CAACC,eAAe,CAACG,eAAe,GAAG,MAAM;MAC7CN,YAAY,GAAGE,MAAM,CAACC,eAAe,CAACC,SAAS,CAAC,CAAC;IACnD,CAAC;EACH;AACF;AAEA,OAAO,SAASG,KAAKA,CAACC,IAAI,EAAE;EAAEC,IAAI,GAAG,CAAC;EAAEC,KAAK,GAAG,CAAC;EAAEC,IAAI,GAAG;AAAQ,CAAC,GAAG,CAAC,CAAC,EAAE;EACxE,IAAI,CAACT,MAAM,CAACC,eAAe,EAAE;EAC7BF,UAAU,CAAC,CAAC;EACZC,MAAM,CAACC,eAAe,CAACS,MAAM,CAAC,CAAC,CAAC,CAAC;;EAEjC,MAAMC,CAAC,GAAG,IAAIC,wBAAwB,CAACN,IAAI,CAAC;EAC5CK,CAAC,CAACF,IAAI,GAAGA,IAAI;EACbE,CAAC,CAACJ,IAAI,GAAGA,IAAI;EACbI,CAAC,CAACH,KAAK,GAAGA,KAAK;;EAEf;EACA,MAAMK,SAAS,GACbf,YAAY,CAACgB,IAAI,CAACC,CAAC,IAAI,KAAK,CAACC,IAAI,CAACD,CAAC,CAACN,IAAI,CAAC,IAAI,wCAAwC,CAACO,IAAI,CAACD,CAAC,CAACE,IAAI,CAAC,CAAC,IACnGnB,YAAY,CAACgB,IAAI,CAACC,CAAC,IAAI,KAAK,CAACC,IAAI,CAACD,CAAC,CAACN,IAAI,CAAC,CAAC;EAC5C,IAAII,SAAS,EAAEF,CAAC,CAACO,KAAK,GAAGL,SAAS;EAElCb,MAAM,CAACC,eAAe,CAACI,KAAK,CAACM,CAAC,CAAC;AACjC;AAEA,OAAO,SAASQ,SAASA,CAAA,EAAG;EAC1B,IAAI,CAACnB,MAAM,CAACC,eAAe,EAAE;EAC7BD,MAAM,CAACC,eAAe,CAACS,MAAM,CAAC,CAAC;AACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}